# 如何判断所有线程执行完毕打印日志

前段时间面试一个二十多人的创业公司，心中带着刷面试经验的态度去的，没想到面试官非常有水平，问题个个刁钻(后来知道是阿里的技术专家出来创业的)，一问公司业务原来是一群技术大佬在研发一个新的大数据技术，心里还是有点小得意的，面对这种大佬我竟然杀过了两轮面试，最后人家明说经验不足很多技术都还没机会接触，创业公司也不会花费资源慢慢培养。

### 前提是不知道总共几个线程的情况下

1. 用计数法每新建一个线程计数器加一，每当一个线程完成计数器减一

**这个方案是当时我回答面试官的，然后面试官就告诉我这种方法有个坑，让我回来想想**
这种方法有个坑？计数器为0的时候就一定执行完了？（即消耗的速度比创建的速度快）

当一个线程执行完成计数器减一后为0，但是这时其实任务并没有完成，知识线程创建慢了一步这时候就会错误判断任务已全部完成



* 解决方案（**个人想法总感觉方案不是很好但暂时没有想到更好的**）

	* 每次计数器为0是稍微等待一会在去判断如果还是0则表示全部执行完成，问题来了：等待多长时间合适呢？
	* 一次性创建全部或者部分线程，这样消耗和生成有一定的时间来缓冲，也有问题：一次性创建多山合适


### 如果提前知道创建多少个线程，这个比较好搞了

计数方法就OK了

